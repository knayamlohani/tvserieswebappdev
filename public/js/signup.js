// Generated by CoffeeScript 1.8.0
(function() {
  var signupapp, validateSignupFormData;

  $(window).ready(function() {
    $("#time-zone").val(-(new Date).getTimezoneOffset() / 60);
  });

  validateSignupFormData = function() {};

  signupapp = angular.module('signupapp', ['ui.utils']);

  signupapp.controller('signupAppController', ['$scope', '$http', function($scope) {}]);

  signupapp.directive('signupFormDirective', [
    '$http', '$timeout', function($http, $timeout) {
      return {
        link: function(scope, element, attrs) {
          scope.signupForm.username.available = true;
          scope.signupForm.username.checkAvailabilityReminder = false;
          $("#check-username-availability").on('click', function(e) {
            var username;
            $("#check-username-availability .progress").toggleClass("hidden");
            $("#check-username-availability .search").toggleClass("hidden");
            console.log("username entered", scope.formData.username);
            username = scope.formData.username;
            return $http.post('/checkUsernameAvailability', {
              "username": username
            }).success(function(result, status, headers, config) {
              console.log("client data", result);
              if (!result.err) {
                scope.signupForm.username.checkUsernameAvailabilityCount++;
                if (result.data === 1) {
                  console.log("username available");
                  scope.signupForm.username.available = true;
                } else {
                  console.log("username not available");
                  scope.signupForm.username.available = false;
                }
                $("#check-username-availability .progress").toggleClass("hidden");
                $("#check-username-availability .search").toggleClass("hidden");
                scope.signupForm.username.checkAvailabilityReminder = false;
              }
            }).error(function(result, status, headers, config) {});
          });
          scope.signupForm.username.updateUsernameAvailabilitystatus = function() {
            return scope.signupForm.username.checkAvailabilityReminder = true;
          };
        }
      };
    }
  ]);

}).call(this);


//# sourceMappingURL=signup.js.map
